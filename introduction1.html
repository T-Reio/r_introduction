<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Reio Tanji" />
  <meta name="author" content="Osaka Univ., Graduate School of Econ." />
  <title>An Introduction to R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="introduction1_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="introduction1_files/reveal.js-3.3.0.1/css/theme/serif.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="introduction.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="introduction1_files/header-attrs-2.11/header-attrs.js"></script>
    <link href="introduction1_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="introduction1_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
    <script src="introduction1_files/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <link href="introduction1_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
    <script src="introduction1_files/datatables-binding-0.21/datatables.js"></script>
    <script src="introduction1_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <link href="introduction1_files/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="introduction1_files/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="introduction1_files/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
    <link href="introduction1_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="introduction1_files/nouislider-7.0.10/jquery.nouislider.min.js"></script>
    <link href="introduction1_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="introduction1_files/selectize-0.12.0/selectize.min.js"></script>
    <link href="introduction1_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
    <script src="introduction1_files/crosstalk-1.2.0/js/crosstalk.min.js"></script>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">An Introduction to R</h1>
    <h2 class="author">Reio Tanji</h2>
    <h2 class="author">Osaka Univ., Graduate School of Econ.</h2>
    <h3 class="date">April, 2022</h3>
</section>

<section>
<section id="はじめに" class="title-slide slide level1">
<h1>はじめに</h1>
<ul>
<li>このスライドはhtml形式で保存しています
<ul>
<li>左下のハンバーガーアイコンをクリックすると各ページに飛べます</li>
<li>ただ、PC以外の方法で閲覧するのはちょっと不便</li>
</ul></li>
<li>ファイルをpdfで保存することができます
<ul>
<li>ブラウザURLの末尾の“~html”の後ろに“?print-pdf”を付け、ページを印刷するとpdf形式で保存できます</li>
<li>紙に印刷して見たい、単純に見づらいからpdfで閲覧したいという方はどうぞ</li>
</ul></li>
</ul>
</section>
<section id="関係資料" class="slide level2">
<h2>関係資料</h2>
<ul>
<li>このスライドを含めた資料は以下のURLからダウンロードできます
<ul>
<li><a href="https://raw.githubusercontent.com/T-Reio/r_introduction/main/script/script_sample.R">スクリプトのサンプル</a></li>
<li>名前を付けて保存→ファイルの種類を「すべてのファイル」に変更して、末尾が「.R」で終わる名前にする</li>
</ul></li>
<li>適宜更新していく(予定)ので、たまにチェックしてみて下さい
<ul>
<li>スライドは綺麗に上がらなかったので、来週分はまたSlack (山本先生経由) でお送りします</li>
</ul></li>
</ul>
</section>
<section id="自己紹介" class="slide level2">
<h2>自己紹介</h2>
<ul>
<li>丹治 伶峰 (たんじ れいお)
<ul>
<li>大阪大学大学院 博士後期課程</li>
<li>大阪大学経済学部卒業 (2018)
<ul>
<li>学部時代は準硬式野球部に所属してました</li>
</ul></li>
<li>専門: 労働経済学・行動経済学
<ul>
<li>野球のデータを使って色々してます</li>
<li>野球以外もしてます</li>
</ul></li>
<li>趣味: 音楽聴く、Fantasy Baseball</li>
</ul></li>
<li>よろしくおねがいします</li>
</ul>
</section></section>
<section>
<section id="r言語を使う" class="title-slide slide level1">
<h1>R言語を使う</h1>
<ul>
<li>R言語とは？</li>
<li>Rでできること
<ul>
<li>研究・分析のフロー</li>
</ul></li>
<li>R言語の基本構造</li>
</ul>
</section>
<section id="r言語とは" class="slide level2">
<h2>R言語とは？</h2>
<ul>
<li><p>“<em>R is a free software environment for statistical computing and graphics</em>”<br>(from <a href="https://www.r-project.org/">The R Project for Statistical Computing</a>)</p>
<ul>
<li>統計計算、グラフ作成を行うことができる無料のツール</li>
<li>データの収集、管理、分析から結果の出力・プレゼンテーションの作成までを一つの言語で行うことも出来る</li>
<li>この資料もRを使って作成(R Markdown)</li>
</ul></li>
<li><p>目標</p>
<ul>
<li>今回は、Rの基本的な操作方法を学習した上で、論文執筆の上で最低限必要なアウトプットのための技術習得をめざす</li>
</ul></li>
</ul>
</section>
<section id="rでできること" class="slide level2">
<h2>Rでできること</h2>
<ul>
<li><p>データの操作</p>
<ul>
<li>データの取得：デフォルトのデータセット、csvファイル等の読み込み</li>
<li>データの整理：必要な情報の抽出、データの変形、新たな変数の作成と保存</li>
</ul></li>
<li><p>データの要約・可視化</p>
<ul>
<li>基本統計量の作成</li>
<li>変数間の関係を視覚的に描写：graphics, ggplot2</li>
</ul></li>
<li><p>データ分析</p>
<ul>
<li>計量経済学・統計学で用いられる様々な手法の実装</li>
<li>結果の出力</li>
</ul></li>
<li><p>レポートの作成</p>
<ul>
<li><p>分析結果をスライドにして報告 RMarkdown</p>
<ul>
<li>Word, Powerpoint形式でファイルを出力</li>
</ul></li>
<li><p>出力の保存や体裁を整える手間が削減できる</p></li>
</ul></li>
</ul>
</section>
<section id="データの操作" class="slide level2">
<h2>データの操作</h2>
<ul>
<li>利用するデータの読み込み</li>
</ul>
<p><img src="figs/data_rei.png" width="70%" style="display: block; margin: auto;" /></p>
<ul>
<li><p>データを加工する</p>
<ul>
<li>欲しい行だけ抜き出す、欲しい列だけ抜き出す</li>
<li>元データの情報を使って、分析のための新しい変数を作る</li>
<li>例えば、人口50万人以上の都市に1, それ以外に0を入れる「大都市ダミー」を作成する</li>
</ul></li>
</ul>
</section>
<section id="データの要約可視化" class="slide level2">
<h2>データの要約・可視化</h2>
<ul>
<li>要約統計量の作成</li>
</ul>
<p><img src="figs/summary_ex.png" width="80%" style="display: block; margin: auto;" /></p>
<ul>
<li>データの概要を示す：各変数の平均・標準偏差など</li>
<li>性別ごと、年代ごとなど、カテゴリで分けて表示する場合も</li>
<li>可視化できるデータは可視化すると分かりやすい</li>
</ul>
</section>
<section id="可視化されたデータの例" class="slide level2">
<h2>可視化されたデータの例</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_length_mm, <span class="at">fill =</span> species) <span class="sc">+</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;circle filled&quot;</span>) <span class="sc">+</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;" /></p>
</section>
<section id="データ分析" class="slide level2">
<h2>データ分析</h2>
<ul>
<li>回帰分析などの統計手法による分析を行い、結果をまとめる</li>
</ul>
<p><span class="math display">\[\text{weight}_{i} = \text{flipperSize}_i + \text{Spiecies}_i + u_i\]</span></p>
<pre><code>## 
## Call:
## lm(formula = body_mass_g ~ flipper_length_mm + species, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -927.70 -254.82  -23.92  241.16 1191.68 
## 
## Coefficients:
##                    Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)       -4031.477    584.151  -6.901 2.55e-11 ***
## flipper_length_mm    40.705      3.071  13.255  &lt; 2e-16 ***
## speciesChinstrap   -206.510     57.731  -3.577 0.000398 ***
## speciesGentoo       266.810     95.264   2.801 0.005392 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 375.5 on 338 degrees of freedom
##   ( 2 個の観測値が欠損のため削除されました )
## Multiple R-squared:  0.7826, Adjusted R-squared:  0.7807 
## F-statistic: 405.7 on 3 and 338 DF,  p-value: &lt; 2.2e-16</code></pre>
</section>
<section id="レポートの作成" class="slide level2">
<h2>レポートの作成</h2>
<ul>
<li>Rで行った分析の結果を、Wordやパワーポイントにまとめて出力、保存できる</li>
<li>習熟度によってはそのまま論文を書くことも可能、そこまでいかずとも色々と手間が省けて便利</li>
</ul>
</section>
<section id="おまけデータの取得" class="slide level2">
<h2>おまけ：データの取得</h2>
<ul>
<li>Rでは様々なデータセットを</li>
<li>ウェブサイトから情報を収集して分析を行いたい場合がある</li>
<li>Rのコードからウェブサイトを開き、中の要素を分析に使えるデータセットとして出力することができる</li>
</ul>
</section>
<section id="基本構造" class="slide level2">
<h2>基本構造</h2>
<ul>
<li><p>基本的には、というか全ての命令は</p>
<ul>
<li><p>Rに命令を投げる→命令に従って計算(描画・読み込みなど)を行う</p></li>
<li><p>必要であればアウトプットを返す</p></li>
</ul>
<p>の繰り返し</p></li>
<li><p>エレベーターの3階ボタンを押す→3階に向かう、ドアを開ける</p>
<ul>
<li>ボタンを押すエネルギーでエレベータが動いているわけではない</li>
<li>ワイヤーをどれだけ巻き取ればどれだけ上昇・下降するのか、ドアを開けるためにどの部分にどれだけ力を加えればいいのか、が3回ボタンを押したときに発せられる命令として書かれている</li>
</ul></li>
<li><p>この命令を一つ一つ書く作業を行う</p></li>
<li><p>ExcelやWordなどのソフトウェアでは、こうした命令をコードを書く代わりにボタン操作などでまとめて行ってもらっている</p></li>
</ul>
</section>
<section id="参考" class="slide level2">
<h2>参考</h2>
<ul>
<li>立命館大：森先生のサイトが大変勉強になります
<ul>
<li><a href="https://tomoecon.github.io/R_for_graduate_thesis/">卒業論文のためのR入門</a></li>
</ul></li>
<li>その他、分からないことはgoogleする力を付けましょう
<ul>
<li>“r (関数名)”とかで大体載ってます</li>
<li>GitHubなどで自身の作成したライブラリや関数の使い方などを解説しているものも多数存在</li>
</ul></li>
<li><a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html">R Tips</a></li>
<li><a href="http://www.okadajp.org/RWiki/">RjpWiki</a></li>
</ul>
</section>
<section id="その他" class="slide level2">
<h2>その他</h2>
<ul>
<li>ショートカット：マウスを極力使わない→作業効率の改善</li>
<li>共通の操作
<ul>
<li>Ctrl + X, C, V：順に切り取り・コピー・貼り付け</li>
<li>Ctrl + A：全範囲を選択</li>
<li>Ctrl + Z, Y：操作を戻す・進める</li>
<li>Ctrl + F：ウィンドウ内検索</li>
<li>Ctrl + S：(上書き)保存</li>
</ul></li>
<li>R Studio内の操作
<ul>
<li>Ctrl + Shift + N：新しいスクリプトを開く</li>
<li>Ctrl + O：保存したファイルを開く(Studio以外でもだいたい使える)</li>
<li>Ctrl + W：タブを閉じる(Chromeとかブラウザも同じ)</li>
<li>Ctrl + Q：R Studioの終了</li>
</ul></li>
<li>Word, PowerPoint, Excelを扱うときもできるだけマウスを使わない
<ul>
<li>慣れると作業効率がだいぶ変わる</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="setup" class="title-slide slide level1">
<h1>Setup</h1>
<ul>
<li>Rでの作業に使うもの
<ul>
<li>開発環境とは、R Studioのすすめ</li>
</ul></li>
<li>インストール</li>
<li>基本操作画面</li>
</ul>
</section>
<section id="rでの作業に必要なもの" class="slide level2">
<h2>Rでの作業に必要なもの</h2>
<ul>
<li><strong>R言語</strong>と<strong>R Studio</strong>の2つをインストール
<ul>
<li>R言語をスムーズに利用するためのツール：開発環境がRStudio</li>
<li>デフォルトでR GUI と呼ばれる開発環境がインストールされるが、色々な理由から使いづらい
<ul>
<li>罫線の引いてあるノートに書くか、自由帳に書くかみたいな違い</li>
<li>最終的にR言語で命令を書くのは同じ</li>
</ul></li>
<li>その他にも Jupyter Notebook, VS Code, Atomなど様々な開発環境があるので、好きなものを使えばよい</li>
</ul></li>
<li>R Studio Cloud: クラウド上でR Studioの機能を利用できるサービス
<ul>
<li>無料の場合は月あたりの利用時間が制限されるなど問題はあるが、特に自前PCのない人は検討してみてもよいかも</li>
</ul></li>
</ul>
</section>
<section id="rとr-studio" class="slide level2">
<h2>RとR Studio</h2>
<p><img src="figs/r_structure.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="インストール" class="slide level2">
<h2>インストール</h2>
<p><a href="https://cran.ism.ac.jp/">Rのダウンロードはここから</a></p>
<p><a href="https://www.rstudio.com/products/rstudio/download/#download">RStudio Desktop</a></p>
<ul>
<li>【定期】詰まったら4回生に訊いて下さい</li>
<li>それぞれ必ず最新バージョンをダウンロードすること
<ul>
<li>定期的にアップデートしておくのがおすすめ、たまに関数の仕様とかが大幅に変わる</li>
<li>たぶんいないと思いますが、Ver.4.0.0以前のものを使用している4回生はインストールし直して下さい</li>
</ul></li>
<li>Cドライブに日本語フォントが含まれている人
<ul>
<li>C:/Users/…/…のところ</li>
<li>ファイルの保存などする際に非常に面倒なことになります</li>
<li>特に動作で問題が出なければいいですが、コードの実行中に止まるなどあれば相談して下さい</li>
<li>今から買う人は絶対に日本語フォントを入れないようにしましょう、一生</li>
</ul></li>
</ul>
</section>
<section id="r-studioの基本画面" class="slide level2">
<h2>R Studioの基本画面</h2>
<ul>
<li>4つの画面 (Pane)が表示される: コードを入力するのは Source, Consoleの2つ
<ul>
<li>Source：Rスクリプトなどを編集・保存</li>
<li>Console：実行するコードを直接入力・実行できる。</li>
<li>右側の Pane では読み込んだデータフレームやオブジェクトの定義確認、図表出力のチェックなどが行える</li>
</ul></li>
</ul>
<p><img src="figs/rstudio_appearance.png" width="77%" style="display: block; margin: auto;" /></p>
</section>
<section id="触ってみる" class="slide level2">
<h2>触ってみる</h2>
<ul>
<li>コンソールに適当なコードを入力してみよう</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<ul>
<li>コンソールではEnter, ソース(スクリプト)ではCtrl + Enterでコードを実行する</li>
<li>出力は&gt;に続いて出る(文字色が変わるので分かりやすいはず)</li>
<li>このスライド上では、コード、出力を四角囲みで、うち出力を##に続く形で表現する</li>
</ul>
</section></section>
<section>
<section id="プロジェクトの作成バージョン管理" class="title-slide slide level1">
<h1>プロジェクトの作成、バージョン管理</h1>
<ul>
<li>ディレクトリとは</li>
<li>ディレクトリの構造</li>
<li>フォルダの共有方法</li>
<li>R Studioでプロジェクトを作成する方法</li>
</ul>
</section>
<section id="ディレクトリ" class="slide level2">
<h2>ディレクトリ</h2>
<ul>
<li>ファイルやフォルダを参照する際に示すPC内の<strong>住所</strong>
<ul>
<li>C:/…がそれ</li>
<li>全てが同じ階層に入っているのは作業こそ楽だが、自分で参照するときに探すのが面倒
<ul>
<li>ゼミ論文に使うdata.csvというファイルを保存→他の講義で同じ名前のファイルを受け取る→後から見たらどれがどれだか分からなくなる</li>
</ul></li>
</ul></li>
<li>整理の方法: 作業やファイルの種類ごとにフォルダを作り、異なる系統のファイルを識別
<ul>
<li>何をする作業のフォルダなのか？</li>
<li>データの種類：整理する前の生データなのか、そのまま分析に使えるデータなのか？</li>
<li>アウトプット: 分析結果、図表</li>
</ul></li>
<li>R Studioでは、特定のフォルダを「プロジェクト」として扱い、「誰のPCでも動くコード」を作ることができる</li>
</ul>
</section>
<section id="ディレクトリの構造" class="slide level2">
<h2>ディレクトリの構造</h2>
<p><img src="figs/folder.jpg" width="77%" style="display: block; margin: auto;" /></p>
<ul>
<li>使いやすいフォルダの作成
<ul>
<li>各自のPCで“r_intro”フォルダを作り、必要なファイルをしまっておけば、誰が書いたコードでも個々人がPCで再現できる環境に</li>
<li>フォルダ名は\(バックスラッシュ, ￥)を/ (スラッシュ)に変えて記述</li>
</ul></li>
</ul>
</section>
<section id="フォルダ" class="slide level2">
<h2>フォルダ</h2>
<p><img src="figs/directory_system.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="フォルダ-contd" class="slide level2">
<h2>フォルダ (cont’d)</h2>
<p><img src="figs/directory_system2.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="ワーキングディレクトリの確認と変更" class="slide level2">
<h2>ワーキングディレクトリの確認と変更</h2>
<ul>
<li>ワーキングディレクトリ：Rが見ているフォルダ
<ul>
<li>CSVなどのファイルを読み込む際は、このフォルダから指定された名前のファイルを探す</li>
</ul></li>
<li>R Studioのプロジェクトを利用している時は、そのフォルダがある場所がワーキングディレクトリ</li>
<li><code>getwd</code>関数で今のワーキングディレクトリを確認できる
<ul>
<li><code>setwd</code>で変更できるが、基本的には相対パスで指定した方が再現性が高いのでおすすめ</li>
</ul></li>
<li>ファイル名：基本全て""で囲む、ワーキングディレクトリの中にあるフォルダを開きたい場合は/で区切る
<ul>
<li><code>"C:/folder1/folder2/data.csv"</code></li>
</ul></li>
</ul>
</section>
<section id="拡張子" class="slide level2">
<h2>拡張子</h2>
<ul>
<li>PC上で扱うファイルには、それがどのアプリケーション(ソフト)で利用するものなのかがPC側に伝わる印が付いていることが多い：拡張子
<ul>
<li>例えば.csvはMicrosoft Excelで開くと決めている(既定のアプリ)</li>
<li>.RはRスクリプトを表すことが分かるのでR StudioやR GUI、.htmlはブラウザで開く</li>
<li>R Studio、Excelのそれぞれでcsvファイルを開いてみよう</li>
</ul></li>
</ul>
</section>
<section id="フォルダの共有方法" class="slide level2">
<h2>フォルダの共有方法</h2>
<ul>
<li>フォルダの共有：データや書いたスクリプトを共有する
<ul>
<li>何度も修正を加えたり、作った図表を共有するのはめんどい</li>
<li>結果、分析をした人がスライドも全部作る…になりがち</li>
</ul></li>
<li>フォルダをメンバー間で同期する(共有する)ツールをマスターすると、グループでの作業が楽になる
<ul>
<li><a href="https://www.dropbox.com/">Dropbox</a></li>
<li><a href="https://github.com/">GitHub</a></li>
</ul></li>
<li>特にGitHubはRStudioと直接連携して簡単にクラウド共有・共有したデータのダウンロードも可能なので非常に便利
<ul>
<li>データをオープンで保有することになるので、扱うデータの種類によっては注意が必要</li>
</ul></li>
</ul>
</section>
<section id="フォルダの共有方法contd" class="slide level2">
<h2>フォルダの共有方法(cont’d)</h2>
<ul>
<li>Google Driveを使う方法もあり
<ul>
<li>Google Document, Spreadsheet, Slides を使った論文共同執筆はべんり</li>
<li>OfficeのWord, Excel, Powerpointに比べると機能がかなり制限される弱点</li>
<li>特にスライド作成に関しては不便なポイントが多いかも</li>
</ul></li>
<li>文面はGoogle Driveで共有しながら作成しつつ、体裁を適宜Wordにダウンロードするなどして修正する必要がある</li>
</ul>
</section>
<section id="プロジェクトの作り方" class="slide level2">
<h2>プロジェクトの作り方</h2>
<p><img src="figs/create_repository.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="プロジェクトの作り方contd" class="slide level2">
<h2>プロジェクトの作り方(cont’d)</h2>
<p><img src="figs/create_repository2.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="ディレクトリの管理" class="slide level2">
<h2>ディレクトリの管理</h2>
<p><img src="figs/directory_example.png" width="95%" style="display: block; margin: auto;" /></p>
<ul>
<li>元データ、Rスクリプト、作成した画像や表…など、作ったものをフォルダで整理すると便利</li>
<li>とりあえず、作ったプロジェクトフォルダに「data」と「script」のフォルダを作成してみよう</li>
</ul>
</section></section>
<section>
<section id="基本操作" class="title-slide slide level1">
<h1>基本操作</h1>
<ul>
<li>コンソールに数値を打ち込む、計算する</li>
<li>スクリプトの作成</li>
<li>変数の型</li>
<li>オブジェクトに数値などを割り当てる</li>
<li>値を束にして扱う</li>
</ul>
</section>
<section id="入力画面" class="slide level2">
<h2>入力画面</h2>
<ul>
<li>コンソール(通常左下)の“&gt;”が入力待ち状態を表す</li>
<li>命令を書いてEnterキーを押すと実行できる</li>
</ul>
<p><img src="figs/console.png" width="95%" style="display: block; margin: auto;" /></p>
</section>
<section id="スクリプトの作成演算子" class="slide level2">
<h2>スクリプトの作成、演算子</h2>
<ul>
<li><p>“r_introduction”というプロジェクトを作成</p></li>
<li><p>R Studioを開く</p>
<ul>
<li>R Consoleにコードを直接入力してEnter、もしくはRスクリプトにコードを記述してCtrl + Enterで実行</li>
<li>RスクリプトはCtrl+Shift+Nで作成可能</li>
<li>Ctrl + Sで保存、上書き保存</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> (<span class="dv">3</span> <span class="sc">/</span> <span class="dv">4</span>) <span class="co"># 掛け算は*で</span></span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<ul>
<li>その他、基本的な演算記号は<a href="http://cse.naro.affrc.go.jp/takezawa/r-tips/r.html">R-Tips</a>などを参照</li>
</ul>
</section>
<section id="source-スクリプトやマークダウンファイルの編集" class="slide level2">
<h2>Source: スクリプトやマークダウンファイルの編集</h2>
<p><img src="figs/script.png" width="95%" style="display: block; margin: auto;" /></p>
<ul>
<li>Ctrl + Enterで選択箇所のコードを実行</li>
<li>長いコードを途中で改行できることも利点</li>
<li>Ctrl + Sで適宜上書き保存できる</li>
</ul>
</section>
<section id="変数の型" class="slide level2">
<h2>変数の型</h2>
<ul>
<li>数値だけでなく、文字も扱うことができる
<ul>
<li>何を使っても良いわけではない：Excelも一緒
<ul>
<li>電話番号を入力したのに頭の0が消える→Excelが電話番号を数値として認識してしまっているから</li>
<li>Excelの場合、数値の形式を標準(Excelに自己判断させる)から文字列に変更することで対処</li>
</ul></li>
<li>文字列を""で囲って表記することで、それが文字列であることをRに伝えることができる</li>
<li>class関数(関数については後述)を使うと、その値の型が分かる</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fl">3.14</span>) <span class="co"># class()はその変数の型を返す関数</span></span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="st">&#39;1.90&#39;</span>) <span class="co"># 文字列 character と判定される</span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
</section>
<section id="変数の型contd" class="slide level2">
<h2>変数の型(cont’d)</h2>
<ul>
<li>numeric, integerは足し引きできるが、characterはできない
<ul>
<li>integerは整数</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;1&quot;</span> <span class="sc">+</span> <span class="st">&quot;2&quot;</span> <span class="co"># エラーが出る</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(11L) <span class="co"># 整数の後ろに&quot;L&quot;を付けると整数として認識される</span></span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
</section>
<section id="変数の型contd-1" class="slide level2">
<h2>変数の型(cont’d)</h2>
<ul>
<li>factor
<ul>
<li>順序が付いた文字列</li>
<li>factor()で定義</li>
<li>アルファベット順や数字順以外の方法で並べたい場合に使う</li>
<li>まあ使うときにやればいいとおもいます</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;February&quot;</span>, <span class="st">&quot;March&quot;</span>, <span class="st">&quot;April&quot;</span>)) <span class="co"># アルファベット順に並んでしまう</span></span></code></pre></div>
<pre><code>## [1] January  February March    April   
## Levels: April February January March</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;February&quot;</span>, <span class="st">&quot;March&quot;</span>, <span class="st">&quot;April&quot;</span>), </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;February&quot;</span>, <span class="st">&quot;March&quot;</span>, <span class="st">&quot;April&quot;</span>))</span></code></pre></div>
<pre><code>## [1] January  February March    April   
## Levels: January February March April</code></pre>
</section>
<section id="オブジェクト" class="slide level2">
<h2>オブジェクト</h2>
<ul>
<li>では""で囲わずに入力した文字列はどう認識されるのか？
<ol type="1">
<li>特定の値と結びついている</li>
</ol>
<ul>
<li><code>pi</code>: 円周率</li>
</ul>
<ol start="2" type="1">
<li>自信が定義した任意の値が格納されている</li>
</ol>
<ul>
<li>オブジェクト: 数値やベクトル、データフレームやリストを格納、R Studioでは右上のEnvironmentタブに定義が表示される</li>
<li>回帰分析などの計算結果を格納することも可能</li>
<li><code>&lt;-</code> を使って適当な値を定義する</li>
<li><code>wani &lt;- 3</code>：waniというオブジェクトに値3を格納</li>
</ul></li>
<li>R Studioでは Environmentに定義したオブジェクトの中身が表示される</li>
</ul>
</section>
<section id="オブジェクトの定義" class="slide level2">
<h2>オブジェクトの定義</h2>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pi <span class="co"># デフォルトで円周率が格納されている</span></span></code></pre></div>
<pre><code>## [1] 3.141593</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>value <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="co"># valueという文字列に8を代入</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>value <span class="sc">+</span> <span class="dv">10</span> <span class="co"># 今valueの値は8なので、8 + 10を計算した結果を返してくれる</span></span></code></pre></div>
<pre><code>## [1] 18</code></pre>
</section>
<section id="値を束にして扱う" class="slide level2">
<h2>値を束にして扱う</h2>
<ul>
<li>ぶっちゃけ、<span class="math inline">\(5 \times 5\)</span>ぐらいの計算なら電卓でやればよい</li>
<li>R、というかPCで計算ができる強みは、複数の計算や結果の保存を同時に行うことができる点
<ul>
<li>人間の頭は複数の計算を同時に扱えない</li>
<li>計量分析を行う上で不可欠な行列計算などと相性が良い</li>
</ul></li>
<li>Rには複数の数値を扱うための束を作る記法が存在する
<ul>
<li>ベクトル：複数の値を順番付きで格納</li>
<li>行列、データフレーム：行方向と列方向に展開、ベクトルを束にしたものともいえる</li>
<li>リスト：行列やデータフレームを束にして扱うことができる</li>
</ul></li>
</ul>
</section>
<section id="ベクトル" class="slide level2">
<h2>ベクトル</h2>
<ul>
<li>ベクトル：複数の要素を含む列
<ul>
<li><code>c(a, b, c, ...)</code>で定義される</li>
<li>文字列など、他の数値型を利用してもOK</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1192</span>, <span class="dv">2960</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>vec <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2384 5920</code></pre>
<ul>
<li>関数(後述)を用いて規則性のあるベクトルを簡単に定義することもできる
<ul>
<li><code>seq(a, b, c)</code>: aからbまで、公差cの等差数列
<ul>
<li>公差が1の場合は、<code>a:b</code>でも代替可能</li>
</ul></li>
<li><code>rep(a, b)</code>: aをb回繰り返す数列</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
</section>
<section id="データフレーム" class="slide level2">
<h2>データフレーム</h2>
<ul>
<li><p>各行に観測単位(個人、グループ、都道府県など)、各列に特定の情報を含んだデータ形式</p>
<ul>
<li>実際にデータ分析を行う際は、csvファイルなどをこの形式で読み込むことでRで扱えるようにする</li>
</ul></li>
<li><p>100人の性別、学年、学部が分かるデータフレーム：100行×3列のデータフレームになる</p></li>
<li><p>データフレームは<code>data.frame</code>関数、もしくはtibbleパッケージの<code>tibble</code>関数で定義する</p></li>
</ul>
</section>
<section id="データフレーム-contd" class="slide level2">
<h2>データフレーム (cont’d)</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="co"># dfというオブジェクトにデータフレームを定義</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">faculty =</span> <span class="fu">c</span>(<span class="st">&quot;econ&quot;</span>, <span class="st">&quot;law&quot;</span>, <span class="st">&quot;foreign&quot;</span>, <span class="st">&quot;lit&quot;</span>), <span class="co"># 各列のデータをベクトル形式で代入</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">grade =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">toeic =</span> <span class="fu">c</span>(<span class="dv">300</span>, <span class="dv">820</span>, <span class="cn">NA</span>, <span class="dv">785</span>) <span class="co"># NA: 該当する値が存在しないことを表す＝無回答など</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df)</span></code></pre></div>
<pre><code>##   faculty grade toeic
## 1    econ     4   300
## 2     law     2   820
## 3 foreign     1    NA
## 4     lit     1   785</code></pre>
</section>
<section id="定義したデータフレームの確認" class="slide level2">
<h2>定義したデータフレームの確認</h2>
<p><img src="figs/df_check.png" width="90%" style="display: block; margin: auto;" /></p>
</section>
<section id="リスト" class="slide level2">
<h2>リスト</h2>
<ul>
<li>値、ベクトル、データフレームなど、何を入れてもいい箱</li>
<li><code>list(要素1, 要素2, ...)</code>で定義</li>
<li>複数のデータフレームに対して同じ操作をしたい場合などに便利</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>listA <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">b =</span> <span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">c =</span> <span class="dv">100</span><span class="sc">:</span><span class="dv">104</span>), df)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(listA)</span></code></pre></div>
<pre><code>## [[1]]
##   a  b   c
## 1 1 11 100
## 2 2 12 101
## 3 3 13 102
## 4 4 14 103
## 5 5 15 104
## 
## [[2]]
##   faculty grade toeic
## 1    econ     4   300
## 2     law     2   820
## 3 foreign     1    NA
## 4     lit     1   785</code></pre>
</section>
<section id="リスト-contd" class="slide level2">
<h2>リスト (cont’d)</h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(listA[[<span class="dv">1</span>]]) <span class="co"># リストの中の一部の要素のみ利用する場合は、[[]]で指定する</span></span></code></pre></div>
<pre><code>##   a  b   c
## 1 1 11 100
## 2 2 12 101
## 3 3 13 102
## 4 4 14 103
## 5 5 15 104</code></pre>
<ul>
<li>あんまり便利さが伝わらなさそうなので分析パートで後述</li>
</ul>
</section>
<section id="関数" class="slide level2">
<h2>関数</h2>
<ul>
<li>Rで行う典型的な操作・計算を行う命令</li>
<li>操作を実行する対象となる値や、実行にあたって選択可能な様々なオプションを(関数名)(引数1 = ., 引数2 = ., …)の形で記述</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="at">x =</span> <span class="dv">100</span>, <span class="at">base =</span> <span class="dv">10</span>) <span class="co"># 100の対数、底10で計算</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="at">x =</span> <span class="dv">100</span>, <span class="at">base =</span> <span class="dv">5</span>) <span class="co"># 底を5に変更</span></span></code></pre></div>
<pre><code>## [1] 2.861353</code></pre>
</section>
<section id="関数-contd" class="slide level2">
<h2>関数 (cont’d)</h2>
<ul>
<li>各関数において使用される引数の名前は決まっており、必要なオプションに対して一つひとつ情報を指定する
<ul>
<li>引数には数値や文字列を取ったり、ベクトルやデータフレームを取る時もある</li>
</ul></li>
<li>引数を指定しなければエラーが出るものと、指定しない場合のオプションを自動で選んでくれるものとが存在</li>
<li>パッケージ名::関数名()でその関数がどのパッケージに属しているかを明示することもできる</li>
<li>実行結果のエラー
<ul>
<li>エラー：引数指定の不備などで計算が実行できなかった場合</li>
<li>警告(warning)：引数を自動補完した、計算結果に不備があるなどしたが、とりあえず結果は出た</li>
</ul></li>
</ul>
</section>
<section id="関数とベクトル" class="slide level2">
<h2>関数とベクトル</h2>
<ul>
<li>関数の引数にベクトルやデータフレームを使用するのももちろん可能</li>
<li><code>mean</code>関数、<code>sd</code>関数は、それぞれ値の平均、標準偏差を計算する関数</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">rep</span>(<span class="dv">3</span>, <span class="dv">10</span>), <span class="dv">4</span><span class="sc">:</span><span class="dv">10</span>) <span class="co">#1, 2, ..., 5, 3, 3, ... </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(values) <span class="co"># ベクトルの平均を計算</span></span></code></pre></div>
<pre><code>## [1] 4.272727</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(values)</span></code></pre></div>
<pre><code>## [1] 2.333643</code></pre>
</section>
<section id="パッケージの利用" class="slide level2">
<h2>パッケージの利用</h2>
<ul>
<li>パッケージ：便利な関数をまとめて利用可能にする関数のセット</li>
<li>世界中のプログラマーが様々な分野における分析やデータ収集に関するパッケージを開発・公開している
<ul>
<li>これらを全て無料でダウンロードし、利用できるのがRの強み</li>
</ul></li>
<li><code>install.packages</code>関数を用いてCRAN(公式のインストールサイト)からインストール</li>
<li>その他、Githubにパッケージを公開している人もいるので、その場合は別の関数を利用</li>
<li>インストールしたパッケージは、毎回Rの起動時に<code>library</code>関数、もしくは<code>require</code>関数を用いて有効化する</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) <span class="co"># tidyverse パッケージをインストール</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># tidyverse パッケージを有効化：起動したときに毎回実行する</span></span></code></pre></div>
</section>
<section id="例図形の描画" class="slide level2">
<h2>例：図形の描画</h2>
<ul>
<li><span class="math inline">\(y = x^2\)</span>のグラフの描画、定義域は-5から5</li>
<li>pchはプロットの形を指定、colはプロットの色</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>graphics<span class="sc">::</span><span class="fu">plot</span>(<span class="at">x =</span> <span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">y =</span> (<span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">5</span>)<span class="sc">^</span><span class="dv">2</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">&quot;magenta&quot;</span>) </span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-28-1.png" width="47%" style="display: block; margin: auto;" /></p>
</section></section>
<section>
<section id="データ操作" class="title-slide slide level1">
<h1>データ操作</h1>
<ul>
<li>tidyverse パッケージの活用</li>
<li>R内のデータセットを利用する</li>
<li>データの中身を確認する</li>
<li>csvファイルの読み込み、保存
<ul>
<li>csvファイルを保存する</li>
<li>PCに保存したデータを読み込む</li>
<li>ネットで公開されているcsvファイルを読み込む</li>
<li>その他のデータ形式</li>
</ul></li>
<li>データの詳細を調べる
<ul>
<li>サイトの参照</li>
<li>要約統計量の作成：データの概観を掴む</li>
</ul></li>
<li>データを操作する
<ul>
<li>不要な行・列の削除</li>
<li>サンプルの分割</li>
<li>新しい列の作成・条件分岐</li>
<li>文字列の処理</li>
</ul></li>
</ul>
</section>
<section id="tidyverse-パッケージ" class="slide level2">
<h2>tidyverse パッケージ</h2>
<ul>
<li>外部からのデータの読み込みや整理、可視化(次章で説明)に必要な関数を一通り揃えた便利なパッケージ</li>
<li>パッケージの中に様々な目的で作成された複数のパッケージを含んでおり、実際に使用する時は<code>library(tidyverse)</code>で全ての関数を利用できる
<ul>
<li>readr: データの読み込みや書き出しを担当するパッケージ</li>
<li>ggplot2: データの可視化：散布図やグラフの作成</li>
<li>dplyr: データの整形を行うパッケージ</li>
<li>purrr: 繰り返し計算(ループ)を行うための関数</li>
</ul></li>
<li><code>install.package</code>を活用してインストール</li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</section>
<section id="パイプ演算子について" class="slide level2">
<h2>パイプ演算子について</h2>
<ul>
<li>パイプ演算子：<code>%&gt;%</code>で記述</li>
<li>一つのオブジェクト (多くはデータフレーム)について、複数の関数を連続して使用したい場合に活用</li>
<li>関数1 <code>%&gt;%</code> 関数2 <code>%&gt;%</code> 関数3…のように記述
<ul>
<li>中身は関数3(関数2(関数1))と同じ</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span> <span class="co"># ベクトルを作る、これが直後の関数で操作される</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span> <span class="co"># 平均を求める</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># 計算結果(求めた平均を表示する)</span></span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<ul>
<li>より直感的に分かりやすいコードが書ける</li>
<li>計算過程をいちいち他のオブジェクトに置かなくていい</li>
</ul>
</section>
<section id="データの取得" class="slide level2">
<h2>データの取得</h2>
<ul>
<li>分析方法が決まったらデータを取得</li>
<li>ここではRで簡単に利用できるサンプルデータを取得して分析・可視化を行う</li>
<li>palmerpenguinsパッケージをインストール、penguins_rawデータを使ってみる</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<ul>
<li>パッケージを読み込むとデータセットが利用できるようになる</li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins</span></code></pre></div>
<ul>
<li>“::”の前にパッケージ名、後ろに関数名(or データフレーム名)を置く記法ならどのパッケージを利用しているのか分かりやすい、この辺はお好みで</li>
</ul>
</section>
<section id="データを確認" class="slide level2">
<h2>データを確認</h2>
<div id="htmlwidget-90691d3c948f88e51db3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-90691d3c948f88e51db3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Adelie&quot;,&quot;Chinstrap&quot;,&quot;Gentoo&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Biscoe&quot;,&quot;Dream&quot;,&quot;Torgersen&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"32.1\" data-max=\"59.6\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"13.1\" data-max=\"21.5\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"172\" data-max=\"231\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2700\" data-max=\"6300\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;female&quot;,&quot;male&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2007\" data-max=\"2009\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344"],["Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap"],["Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream"],[39.1,39.5,40.3,null,36.7,39.3,38.9,39.2,34.1,42,37.8,37.8,41.1,38.6,34.6,36.6,38.7,42.5,34.4,46,37.8,37.7,35.9,38.2,38.8,35.3,40.6,40.5,37.9,40.5,39.5,37.2,39.5,40.9,36.4,39.2,38.8,42.2,37.6,39.8,36.5,40.8,36,44.1,37,39.6,41.1,37.5,36,42.3,39.6,40.1,35,42,34.5,41.4,39,40.6,36.5,37.6,35.7,41.3,37.6,41.1,36.4,41.6,35.5,41.1,35.9,41.8,33.5,39.7,39.6,45.8,35.5,42.8,40.9,37.2,36.2,42.1,34.6,42.9,36.7,35.1,37.3,41.3,36.3,36.9,38.3,38.9,35.7,41.1,34,39.6,36.2,40.8,38.1,40.3,33.1,43.2,35,41,37.7,37.8,37.9,39.7,38.6,38.2,38.1,43.2,38.1,45.6,39.7,42.2,39.6,42.7,38.6,37.3,35.7,41.1,36.2,37.7,40.2,41.4,35.2,40.6,38.8,41.5,39,44.1,38.5,43.1,36.8,37.5,38.1,41.1,35.6,40.2,37,39.7,40.2,40.6,32.1,40.7,37.3,39,39.2,36.6,36,37.8,36,41.5,46.1,50,48.7,50,47.6,46.5,45.4,46.7,43.3,46.8,40.9,49,45.5,48.4,45.8,49.3,42,49.2,46.2,48.7,50.2,45.1,46.5,46.3,42.9,46.1,44.5,47.8,48.2,50,47.3,42.8,45.1,59.6,49.1,48.4,42.6,44.4,44,48.7,42.7,49.6,45.3,49.6,50.5,43.6,45.5,50.5,44.9,45.2,46.6,48.5,45.1,50.1,46.5,45,43.8,45.5,43.2,50.4,45.3,46.2,45.7,54.3,45.8,49.8,46.2,49.5,43.5,50.7,47.7,46.4,48.2,46.5,46.4,48.6,47.5,51.1,45.2,45.2,49.1,52.5,47.4,50,44.9,50.8,43.4,51.3,47.5,52.1,47.5,52.2,45.5,49.5,44.5,50.8,49.4,46.9,48.4,51.1,48.5,55.9,47.2,49.1,47.3,46.8,41.7,53.4,43.3,48.1,50.5,49.8,43.5,51.5,46.2,55.1,44.5,48.8,47.2,null,46.8,50.4,45.2,49.9,46.5,50,51.3,45.4,52.7,45.2,46.1,51.3,46,51.3,46.6,51.7,47,52,45.9,50.5,50.3,58,46.4,49.2,42.4,48.5,43.2,50.6,46.7,52,50.5,49.5,46.4,52.8,40.9,54.2,42.5,51,49.7,47.5,47.6,52,46.9,53.5,49,46.2,50.9,45.5,50.9,50.8,50.1,49,51.5,49.8,48.1,51.4,45.7,50.7,42.5,52.2,45.2,49.3,50.2,45.6,51.9,46.8,45.7,55.8,43.5,49.6,50.8,50.2],[18.7,17.4,18,null,19.3,20.6,17.8,19.6,18.1,20.2,17.1,17.3,17.6,21.2,21.1,17.8,19,20.7,18.4,21.5,18.3,18.7,19.2,18.1,17.2,18.9,18.6,17.9,18.6,18.9,16.7,18.1,17.8,18.9,17,21.1,20,18.5,19.3,19.1,18,18.4,18.5,19.7,16.9,18.8,19,18.9,17.9,21.2,17.7,18.9,17.9,19.5,18.1,18.6,17.5,18.8,16.6,19.1,16.9,21.1,17,18.2,17.1,18,16.2,19.1,16.6,19.4,19,18.4,17.2,18.9,17.5,18.5,16.8,19.4,16.1,19.1,17.2,17.6,18.8,19.4,17.8,20.3,19.5,18.6,19.2,18.8,18,18.1,17.1,18.1,17.3,18.9,18.6,18.5,16.1,18.5,17.9,20,16,20,18.6,18.9,17.2,20,17,19,16.5,20.3,17.7,19.5,20.7,18.3,17,20.5,17,18.6,17.2,19.8,17,18.5,15.9,19,17.6,18.3,17.1,18,17.9,19.2,18.5,18.5,17.6,17.5,17.5,20.1,16.5,17.9,17.1,17.2,15.5,17,16.8,18.7,18.6,18.4,17.8,18.1,17.1,18.5,13.2,16.3,14.1,15.2,14.5,13.5,14.6,15.3,13.4,15.4,13.7,16.1,13.7,14.6,14.6,15.7,13.5,15.2,14.5,15.1,14.3,14.5,14.5,15.8,13.1,15.1,14.3,15,14.3,15.3,15.3,14.2,14.5,17,14.8,16.3,13.7,17.3,13.6,15.7,13.7,16,13.7,15,15.9,13.9,13.9,15.9,13.3,15.8,14.2,14.1,14.4,15,14.4,15.4,13.9,15,14.5,15.3,13.8,14.9,13.9,15.7,14.2,16.8,14.4,16.2,14.2,15,15,15.6,15.6,14.8,15,16,14.2,16.3,13.8,16.4,14.5,15.6,14.6,15.9,13.8,17.3,14.4,14.2,14,17,15,17.1,14.5,16.1,14.7,15.7,15.8,14.6,14.4,16.5,15,17,15.5,15,13.8,16.1,14.7,15.8,14,15.1,15.2,15.9,15.2,16.3,14.1,16,15.7,16.2,13.7,null,14.3,15.7,14.8,16.1,17.9,19.5,19.2,18.7,19.8,17.8,18.2,18.2,18.9,19.9,17.8,20.3,17.3,18.1,17.1,19.6,20,17.8,18.6,18.2,17.3,17.5,16.6,19.4,17.9,19,18.4,19,17.8,20,16.6,20.8,16.7,18.8,18.6,16.8,18.3,20.7,16.6,19.9,19.5,17.5,19.1,17,17.9,18.5,17.9,19.6,18.7,17.3,16.4,19,17.3,19.7,17.3,18.8,16.6,19.9,18.8,19.4,19.5,16.5,17,19.8,18.1,18.2,19,18.7],[181,186,195,null,193,190,181,195,193,190,186,180,182,191,198,185,195,197,184,194,174,180,189,185,180,187,183,187,172,180,178,178,188,184,195,196,190,180,181,184,182,195,186,196,185,190,182,179,190,191,186,188,190,200,187,191,186,193,181,194,185,195,185,192,184,192,195,188,190,198,190,190,196,197,190,195,191,184,187,195,189,196,187,193,191,194,190,189,189,190,202,205,185,186,187,208,190,196,178,192,192,203,183,190,193,184,199,190,181,197,198,191,193,197,191,196,188,199,189,189,187,198,176,202,186,199,191,195,191,210,190,197,193,199,187,190,191,200,185,193,193,187,188,190,192,185,190,184,195,193,187,201,211,230,210,218,215,210,211,219,209,215,214,216,214,213,210,217,210,221,209,222,218,215,213,215,215,215,216,215,210,220,222,209,207,230,220,220,213,219,208,208,208,225,210,216,222,217,210,225,213,215,210,220,210,225,217,220,208,220,208,224,208,221,214,231,219,230,214,229,220,223,216,221,221,217,216,230,209,220,215,223,212,221,212,224,212,228,218,218,212,230,218,228,212,224,214,226,216,222,203,225,219,228,215,228,216,215,210,219,208,209,216,229,213,230,217,230,217,222,214,null,215,222,212,213,192,196,193,188,197,198,178,197,195,198,193,194,185,201,190,201,197,181,190,195,181,191,187,193,195,197,200,200,191,205,187,201,187,203,195,199,195,210,192,205,210,187,196,196,196,201,190,212,187,198,199,201,193,203,187,197,191,203,202,194,206,189,195,207,202,193,210,198],[3750,3800,3250,null,3450,3650,3625,4675,3475,4250,3300,3700,3200,3800,4400,3700,3450,4500,3325,4200,3400,3600,3800,3950,3800,3800,3550,3200,3150,3950,3250,3900,3300,3900,3325,4150,3950,3550,3300,4650,3150,3900,3100,4400,3000,4600,3425,2975,3450,4150,3500,4300,3450,4050,2900,3700,3550,3800,2850,3750,3150,4400,3600,4050,2850,3950,3350,4100,3050,4450,3600,3900,3550,4150,3700,4250,3700,3900,3550,4000,3200,4700,3800,4200,3350,3550,3800,3500,3950,3600,3550,4300,3400,4450,3300,4300,3700,4350,2900,4100,3725,4725,3075,4250,2925,3550,3750,3900,3175,4775,3825,4600,3200,4275,3900,4075,2900,3775,3350,3325,3150,3500,3450,3875,3050,4000,3275,4300,3050,4000,3325,3500,3500,4475,3425,3900,3175,3975,3400,4250,3400,3475,3050,3725,3000,3650,4250,3475,3450,3750,3700,4000,4500,5700,4450,5700,5400,4550,4800,5200,4400,5150,4650,5550,4650,5850,4200,5850,4150,6300,4800,5350,5700,5000,4400,5050,5000,5100,4100,5650,4600,5550,5250,4700,5050,6050,5150,5400,4950,5250,4350,5350,3950,5700,4300,4750,5550,4900,4200,5400,5100,5300,4850,5300,4400,5000,4900,5050,4300,5000,4450,5550,4200,5300,4400,5650,4700,5700,4650,5800,4700,5550,4750,5000,5100,5200,4700,5800,4600,6000,4750,5950,4625,5450,4725,5350,4750,5600,4600,5300,4875,5550,4950,5400,4750,5650,4850,5200,4925,4875,4625,5250,4850,5600,4975,5500,4725,5500,4700,5500,4575,5500,5000,5950,4650,5500,4375,5850,4875,6000,4925,null,4850,5750,5200,5400,3500,3900,3650,3525,3725,3950,3250,3750,4150,3700,3800,3775,3700,4050,3575,4050,3300,3700,3450,4400,3600,3400,2900,3800,3300,4150,3400,3800,3700,4550,3200,4300,3350,4100,3600,3900,3850,4800,2700,4500,3950,3650,3550,3500,3675,4450,3400,4300,3250,3675,3325,3950,3600,4050,3350,3450,3250,4050,3800,3525,3950,3650,3650,4000,3400,3775,4100,3775],["male","female","female",null,"female","male","female","male",null,null,null,null,"female","male","male","female","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male",null,"female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male",null,"male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male",null,"male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male",null,"male","female","male","female","male","female","male","female","male","female","male",null,"male","female",null,"female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","male","female","male","female","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","male","female"],[2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>species<\/th>\n      <th>island<\/th>\n      <th>bill_length_mm<\/th>\n      <th>bill_depth_mm<\/th>\n      <th>flipper_length_mm<\/th>\n      <th>body_mass_g<\/th>\n      <th>sex<\/th>\n      <th>year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":3,"scrollX":true,"scrollY":true,"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true,"lengthMenu":[3,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<ul>
<li>penguinデータの他、経済学向けのデータセットも利用できる</li>
<li>AERパッケージをダウンロードすると良い</li>
</ul>
</section>
<section id="penguins-データの概要" class="slide level2">
<h2>Penguins データの概要</h2>
<ul>
<li>ペンギンをとっ捕まえて大きさや重さを計測したデータ</li>
<li>元論文：<a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0090081">Kristen B. Gorman ,Tony D. Williams, and William R. Fraser (2014)</a></li>
<li>論文引用のフォーマット
<ul>
<li>Gorman KB, Williams TD, Fraser WR (2014) Ecological Sexual Dimorphism and Environmental Variability within a Community of Antarctic Penguins (Genus Pygoscelis). PLoS ONE 9(3): e90081. [<a href="https://doi.org/10.1371/journal.pone.0090081" class="uri">https://doi.org/10.1371/journal.pone.0090081</a>]</li>
<li>著者名、公刊年度、タイトル、学術誌名、その他(URLなど)の順で記載するのが一般的</li>
<li>“Cite” みたいなボタンを押すと簡単にフォーマットをコピーできることが多いです</li>
</ul></li>
<li>ここではこのデータセットを例に、基本的なデータ操作を学習する</li>
<li>palmerpenguinsパッケージには、成型前のデータ(penguins_raw)も入っている</li>
</ul>
</section>
<section id="データの一部分を確認する" class="slide level2">
<h2>データの一部分を確認する</h2>
<ul>
<li>head(データフレーム, 行数)でデータの行頭を表示させることができる</li>
<li>tailなら下から</li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins_raw, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 17
##   studyName `Sample Number` Species          Region Island Stage `Individual ID`
##   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
## 1 PAL0708                 1 Adelie Penguin ~ Anvers Torge~ Adul~ N1A1           
## 2 PAL0708                 2 Adelie Penguin ~ Anvers Torge~ Adul~ N1A2           
## 3 PAL0708                 3 Adelie Penguin ~ Anvers Torge~ Adul~ N2A1           
## 4 PAL0708                 4 Adelie Penguin ~ Anvers Torge~ Adul~ N2A2           
## 5 PAL0708                 5 Adelie Penguin ~ Anvers Torge~ Adul~ N3A1           
## # ... with 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
## #   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
## #   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
<ul>
<li>R Studio中では<code>View</code>関数を使うと別ウインドウで開くのでこれが見やすい</li>
</ul>
</section>
<section id="外部ファイルでのデータの扱い" class="slide level2">
<h2>外部ファイルでのデータの扱い</h2>
<ul>
<li>Rで利用できるデータセットはチュートリアルに便利だが、実証分析にそのまま使うのは難しい
<ul>
<li>データの種類
<ul>
<li>二次データ：官庁や大学、民間のリサーチ会社やデータサイトなど、自分以外が作成したデータを借りる(目的に合うデータがあればこちらがベター)</li>
<li>一次データ：自作のアンケートや経済実験などを実施し、自らデータセットを作成する</li>
</ul></li>
<li>いずれにせよ、外部から取得してきたデータをRに読み込んでもらう必要がある</li>
<li>csv (comma separated values) ファイルは、代表的なデータ保存方法：データがカンマで区切られている</li>
</ul></li>
<li>ただし、取得したデータにはノイズ(欠損値がある観測や、質問を誤解している回答など)が含まれており、分析を行うためにこれらの問題に対処する必要がある
<ul>
<li>分析の種類によっては必要ない情報が含まれていることも</li>
<li>データを読み込むと同時に、整理したものを保存しておく機能も必要</li>
</ul></li>
</ul>
</section>
<section id="取得したデータをcsvファイルとして保存" class="slide level2">
<h2>取得したデータをcsvファイルとして保存</h2>
<ul>
<li><code>readr::write_excel_csv</code>関数を活用
<ul>
<li>保存したいデータフレーム名と、保存先のファイル名を指定、実行すれば、ファイルをcsv形式で保存してくれる</li>
<li>保存したものをExcelで開くことも可能</li>
</ul></li>
<li>プロジェクトファイル内に“data”というフォルダを作り、その中にデータを保存してみよう</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>penguin_df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_excel_csv</span>(penguin_df, <span class="at">file =</span> <span class="st">&quot;data/penguins.csv&quot;</span>)</span></code></pre></div>
</section>
<section id="csvファイルからデータフレームを読み込み" class="slide level2">
<h2>CSVファイルからデータフレームを読み込み</h2>
<ul>
<li>デフォルトで利用できる<code>read.csv</code>関数を使っても良いが、readrパッケージの<code>read_csv</code>関数の方が速い</li>
<li>さっき保存したファイルをオブジェクト<code>df</code>に代入しておく
<ul>
<li>Tabキーを押すとフォルダ内のキーワード検索も可能</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;data/penguins.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 344 Columns: 8
## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr (3): species, island, sex
## dbl (5): bill_length_mm, bill_depth_mm, flipper_length_mm, body_mass_g, year
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<ul>
<li>read_csv関数の場合、読み込んだデータの各列の型を報告してくれる：num, chr, int, …</li>
</ul>
</section>
<section id="ネットに公開されているurlからcsvファイルを読み込む" class="slide level2">
<h2>ネットに公開されているURLからcsvファイルを読み込む</h2>
<ul>
<li>csvファイルがネット上に公開されていることもある：この場合も、read_csv関数で読み込み可能
<ul>
<li>URLの文字列を入力し、read_csvで読み込む</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&#39;https://raw.githubusercontent.com/chadwickbureau/register/master/data/people.csv&#39;</span> <span class="co"># URLは一例</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url)</span></code></pre></div>
</section>
<section id="その他のデータ形式" class="slide level2">
<h2>その他のデータ形式</h2>
<ul>
<li>csv以外にも様々なデータ形式が存在、それぞれ対応した関数を使うと読み込み可能：基本read_〇〇などの関数名が指定されていることが多い
<ul>
<li>txt形式のファイルはcsv, tsvなどとしてそのまま読み込める場合もある</li>
</ul></li>
<li>xlsxファイル</li>
<li>大容量のデータを保存したい &amp; Excelなどのソフトでデータを扱う予定がない場合はrdsファイルと呼ばれるR向けのバイナリファイルとして保存すると、ハードの保存領域を節約できる：read_rds, write_rds</li>
<li>その他、知らないデータ形式が来たらとりあえずRで開けるか確認してみる</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>penguin_df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_rds</span>(penguin_df, <span class="at">file =</span> <span class="st">&quot;data/penguins.rds&quot;</span>)</span></code></pre></div>
</section>
<section id="データの詳細を調べる" class="slide level2">
<h2>データの詳細を調べる</h2>
<ul>
<li>データを取得したら(取得する前に)、そのデータがどのような情報を含んでいるのかを必ず確認する
<ul>
<li>一次データを取得する場合：質問項目や実験のデザインを慎重に検討する</li>
</ul></li>
<li>ウェブで公開されている二次データには各列に格納されている情報 (documentation) や、アンケートの質問用紙が記載されている</li>
<li>例) 大阪大学 くらしの好みと満足度についてのアンケート：<a href="https://www.iser.osaka-u.ac.jp/survey_data/panelsummary.html">URL</a>
<ul>
<li><a href="https://www.iser.osaka-u.ac.jp/survey_data/doc/japan/questionnaire/japanese/2021QuestionnaireJAPAN.pdf">調査票</a></li>
</ul></li>
<li>データの簡単な要約も記載されていることがある</li>
</ul>
</section>
<section id="要約統計量" class="slide level2">
<h2>要約統計量</h2>
<ul>
<li>整理が終了したら(あるいは、整理を行うために)、データに含まれる情報の概観を記述する</li>
<li>データセットに含まれる各列の平均や標準偏差、レンジなどの統計量をまとめて記載する表</li>
</ul>
<p><img src="figs/summary_ex.png" width="80%" style="display: block; margin: auto;" /></p>
<ul>
<li>何らかの介入の効果(法改正や就学、ナッジによる行動変容など…)を検証したい場合は、介入群と統制群が似た集団であることを確認するため、両者を分けて要約統計量を作成する場合も</li>
<li>様々な関数を利用できるので、目的に応じて好きなものを使う</li>
</ul>
</section>
<section id="ペンギンデータの要約統計量" class="slide level2">
<h2>ペンギンデータの要約統計量</h2>
<ul>
<li>最もシンプルなのはsummary関数
<ul>
<li>各変数の主要な統計量を記載してくれる</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       species          island    bill_length_mm  bill_depth_mm  
##  Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  
##  Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  
##  Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  
##                                  Mean   :43.92   Mean   :17.15  
##                                  3rd Qu.:48.50   3rd Qu.:18.70  
##                                  Max.   :59.60   Max.   :21.50  
##                                  NA&#39;s   :2       NA&#39;s   :2      
##  flipper_length_mm  body_mass_g       sex           year     
##  Min.   :172.0     Min.   :2700   female:165   Min.   :2007  
##  1st Qu.:190.0     1st Qu.:3550   male  :168   1st Qu.:2007  
##  Median :197.0     Median :4050   NA&#39;s  : 11   Median :2008  
##  Mean   :200.9     Mean   :4202                Mean   :2008  
##  3rd Qu.:213.0     3rd Qu.:4750                3rd Qu.:2009  
##  Max.   :231.0     Max.   :6300                Max.   :2009  
##  NA&#39;s   :2         NA&#39;s   :2</code></pre>
</section>
<section id="データを整理する" class="slide level2">
<h2>データを整理する</h2>
<ul>
<li>取得したデータはそのまま分析に使えるわけではない
<ul>
<li>必要な情報が抜け落ちている場合や、アンケートの設問の誤解等で明らかにおかしな回答が存在することがある</li>
<li>情報が全て入っているが、その分析に関しては不適当な観測が含まれる場合も</li>
<li>分析の対象でない観測が一緒に含まれている場合(例えば男性労働者の行動に注目したいときに、女性労働者を含めたまま分析を行うのは不適当)</li>
<li>元データの情報を用いて、新たに変数を作りたい場合もある(例えば、5段階で回答された幸福度を1,2と3-5の2つに再分類した変数を作成する)</li>
</ul></li>
<li>これらの問題を解決し、分析に利用可能なデータセットを作成することを「データの整理」「データクリーニング」と呼ぶ</li>
<li>tidyverseパッケージから、便利な関数がたくさん提供されている
<ul>
<li><code>filter</code>関数：行を絞る</li>
<li><code>select</code>関数：列を絞る</li>
<li><code>mutate</code>関数：新しい変数を作成する</li>
<li><code>split</code>関数：データフレームをリストに分割する</li>
</ul></li>
</ul>
</section>
<section id="列名の付け直し" class="slide level2">
<h2>列名の付け直し</h2>
<ul>
<li>列名は原則アルファベットとアンダースコア(_)で付けておく方がエラーが起こりにくい
<ul>
<li>日本語がギリセーフ、アンダースコア以外の記号や引用符は使わない</li>
<li>数字は2文字目以降にしか使えない</li>
</ul></li>
<li>もし入っている場合は、<code>rename</code> 関数もしくは<code>set_names</code> 関数を用いて列名を変更した方が良い</li>
</ul>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">weight =</span> body_mass_g) <span class="sc">%&gt;%</span> <span class="co"># body_mass_g を weightに</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm weight sex   
##   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;  &lt;int&gt; &lt;fct&gt; 
## 1 Adelie  Torgersen           39.1          18.7               181   3750 male  
## 2 Adelie  Torgersen           39.5          17.4               186   3800 female
## # ... with 1 more variable: year &lt;int&gt;</code></pre>
</section>
<section id="列名の付け直し-contd" class="slide level2">
<h2>列名の付け直し (cont’d)</h2>
<ul>
<li><code>set_names</code> はそのデータセットの列名をまとめて変更する：列数と同じ長さのchr型ベクトルを指定</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>newnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;bill_lg&quot;</span>, <span class="st">&quot;bill_dep&quot;</span>, <span class="st">&quot;flipper&quot;</span>, <span class="st">&quot;weight&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;yr&quot;</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">set_names</span>(newnames) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 x 8
##   species island    bill_lg bill_dep flipper weight sex       yr
##   &lt;fct&gt;   &lt;fct&gt;       &lt;dbl&gt;    &lt;dbl&gt;   &lt;int&gt;  &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
## 1 Adelie  Torgersen    39.1     18.7     181   3750 male    2007
## 2 Adelie  Torgersen    39.5     17.4     186   3800 female  2007</code></pre>
</section>
<section id="データを絞る" class="slide level2">
<h2>データを絞る</h2>
<ul>
<li>条件にあてはまる行を抜き出す：filter関数を利用</li>
<li>条件式の書き方
<ul>
<li>参照する列を記述し、「〇〇に一致する場合」「〇〇より大きい/小さい場合」などの条件をRのルールに従って記述する
<ul>
<li><code>A == B</code>: A列の内容がBと完全に一致, Bが文字列の場合はクオーテーションで囲う</li>
<li><code>A &gt;= B</code>: B以上の値, 逆なら<code>&lt;=</code></li>
<li><code>A %in% c(B, C, D)</code>: A列の要素がベクトルの要素B, C, Dのいずれかに一致</li>
<li>否定は!: <code>A != B</code>, <code>!(A %in% c(a, b, c))</code></li>
</ul></li>
<li>and条件は&amp;, or条件は|で繋ぐ：条件1 | 条件2 なら、1,2いずれかの条件にあてはまるもの</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="co"># ジェンツーペンギンのみに絞る</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 8
##   species island bill_length_mm bill_depth_mm flipper_length_~ body_mass_g sex  
##   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
## 1 Gentoo  Biscoe           46.1          13.2              211        4500 fema~
## 2 Gentoo  Biscoe           50            16.3              230        5700 male 
## # ... with 1 more variable: year &lt;int&gt;</code></pre>
</section>
<section id="欠損値" class="slide level2">
<h2>欠損値</h2>
<ul>
<li>欠損値(分からない、無回答などの理由で値が入っていない)がある場合、そのセルを取り除いて分析を行うことがある</li>
<li>Rでは、<code>NA</code>で表す：型は勝手に判断してくれる場合と、してくれない場合とがある
<ul>
<li><code>NA_real_</code>: num型</li>
<li><code>NA_character</code>: chr型</li>
</ul></li>
<li>「欠損である」という条件を表す関数：<code>is.na()</code>
<ul>
<li>括弧内の値が欠損であるかどうかを返す: filterなどの条件に指定</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() <span class="co"># 列数を返す</span></span></code></pre></div>
<pre><code>## [1] 344</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(body_mass_g)) <span class="sc">%&gt;%</span> <span class="co"># 体重が欠損している個体を除外</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>() <span class="co">#上より列数が減っている</span></span></code></pre></div>
<pre><code>## [1] 342</code></pre>
</section>
<section id="情報を絞る" class="slide level2">
<h2>情報を絞る</h2>
<ul>
<li>全ての列を必要としない場合：select関数を利用</li>
<li>残したい列を順番に列挙するだけでOK。列番号でもよい</li>
<li>落としたい列を-(マイナス)で指定してもよい</li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(species, sex, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   species sex    flipper_length_mm body_mass_g
##   &lt;fct&gt;   &lt;fct&gt;              &lt;int&gt;       &lt;int&gt;
## 1 Adelie  male                 181        3750
## 2 Adelie  female               186        3800
## 3 Adelie  female               195        3250
## 4 Adelie  &lt;NA&gt;                  NA          NA</code></pre>
<ul>
<li>取り出した列をベクトルとして利用したい場合：<code>pull</code>関数で抜き出し可能</li>
</ul>
</section>
<section id="新しい変数を作成する" class="slide level2">
<h2>新しい変数を作成する</h2>
<ul>
<li>今ある情報を元に、新しい列を作成することがある：<code>mutate</code>関数を利用する
<ul>
<li>列の変数型が数値の場合: 四則演算の演算子をそのまま利用できる</li>
<li>特定の条件にあてはまるか否かを判定して数値を代入したい場合：<code>if_else</code>関数、<code>case_when</code>関数を利用</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">flipper_length_2 =</span> flipper_length_mm<span class="sc">^</span><span class="dv">2</span>, <span class="co"># 羽根の長さの2乗</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight_size =</span> <span class="fu">if_else</span>(<span class="at">condition =</span> body_mass_g <span class="sc">&gt;=</span> <span class="dv">4050</span>, <span class="at">true =</span> <span class="st">&quot;L&quot;</span>, <span class="at">false =</span> <span class="st">&quot;F&quot;</span>),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">flipper_size_3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&lt;=</span> <span class="dv">3550</span> <span class="sc">~</span> <span class="st">&quot;S&quot;</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>      body_mass_g <span class="sc">&gt;=</span> <span class="dv">3550</span> <span class="sc">&amp;</span> body_mass_g <span class="sc">&lt;=</span> <span class="dv">4750</span> <span class="sc">~</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;L&quot;</span> <span class="co"># TRUE はそれ以外</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</section>
<section id="作成した変数を確認" class="slide level2">
<h2>作成した変数を確認</h2>
<pre><code>## # A tibble: 344 x 6
##    species island    body_mass_g flipper_length_2 weight_size flipper_size_3
##    &lt;fct&gt;   &lt;fct&gt;           &lt;int&gt;            &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;         
##  1 Adelie  Torgersen        3750            32761 F           M             
##  2 Adelie  Torgersen        3800            34596 F           M             
##  3 Adelie  Torgersen        3250            38025 F           S             
##  4 Adelie  Torgersen          NA               NA &lt;NA&gt;        L             
##  5 Adelie  Torgersen        3450            37249 F           S             
##  6 Adelie  Torgersen        3650            36100 F           M             
##  7 Adelie  Torgersen        3625            32761 F           M             
##  8 Adelie  Torgersen        4675            38025 L           M             
##  9 Adelie  Torgersen        3475            37249 F           S             
## 10 Adelie  Torgersen        4250            36100 L           M             
## # ... with 334 more rows</code></pre>
</section>
<section id="サンプルを分割する" class="slide level2">
<h2>サンプルを分割する</h2>
<ul>
<li>サンプルを特定の変数の値ごとに分割したい時がある
<ul>
<li>例えば、オスのサンプルとメスのサンプルを分割する</li>
<li><code>filter</code>関数を使ってもいいが、例えば雄雌それぞれのサンプルに同じ操作を適用したい場合などは、コードが冗長になる場合がある</li>
<li><code>split</code>関数と<code>pull</code>関数を組み合わせて使うと、データフレームをリスト形式で分割できる</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>df_split <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, sex) <span class="sc">%&gt;%</span> <span class="co"># 表示の都合上列数を限定</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(<span class="fu">pull</span>(., sex)) <span class="co"># 分割の基準にしたい変数を入力</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(df_split)</span></code></pre></div>
<pre><code>## $female
## # A tibble: 165 x 3
##    species island    sex   
##    &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt; 
##  1 Adelie  Torgersen female
##  2 Adelie  Torgersen female
##  3 Adelie  Torgersen female
##  4 Adelie  Torgersen female
##  5 Adelie  Torgersen female
##  6 Adelie  Torgersen female
##  7 Adelie  Torgersen female
##  8 Adelie  Torgersen female
##  9 Adelie  Biscoe    female
## 10 Adelie  Biscoe    female
## # ... with 155 more rows
## 
## $male
## # A tibble: 168 x 3
##    species island    sex  
##    &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt;
##  1 Adelie  Torgersen male 
##  2 Adelie  Torgersen male 
##  3 Adelie  Torgersen male 
##  4 Adelie  Torgersen male 
##  5 Adelie  Torgersen male 
##  6 Adelie  Torgersen male 
##  7 Adelie  Torgersen male 
##  8 Adelie  Biscoe    male 
##  9 Adelie  Biscoe    male 
## 10 Adelie  Biscoe    male 
## # ... with 158 more rows</code></pre>
</section>
<section id="その他データ操作関連の関数" class="slide level2">
<h2>その他データ操作関連の関数</h2>
<ul>
<li>stringr, stringi パッケージは文字列の処理に便利
<ul>
<li>先頭から何文字、指定した条件に合致した文字を抜き出しなど、character型の文字列を操作するのに非常に便利</li>
</ul></li>
</ul>
</section>
<section id="もっと便利な要約統計量" class="slide level2">
<h2>もっと便利な要約統計量</h2>
</section>
<section id="dplyr-パッケージの利用" class="slide level2">
<h2>dplyr パッケージの利用</h2>
<ul>
<li>dplyr: tidyverseパッケージに含まれるデータ操作系の関数の一つ</li>
<li><code>group_by</code> 関数は、以降の操作を指定した変数ごとに行うことを宣言する関数
<ul>
<li>例えば、<code>group_by(species)</code>とすると、以降の操作はペンギンの種類ごとに行われる</li>
</ul></li>
<li><code>summarise</code> 関数は、データフレームの指定された列を任意の関数で集計するための関数</li>
</ul>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_bill_length_mm =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> T), <span class="co"># くちばしの長さの平均を取る、欠損値は除外</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length_mm =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 3
##   mean_bill_length_mm mean_flipper_length_mm mean_body_mass_g
##                 &lt;dbl&gt;                  &lt;dbl&gt;            &lt;dbl&gt;
## 1                43.9                   201.            4202.</code></pre>
<ul>
<li>任意の統計量、変数を自由に選択肢して表を作ることができる</li>
</ul>
</section>
<section id="group_byを組み合わせる" class="slide level2">
<h2>group_byを組み合わせる</h2>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> <span class="co"># 種類ごとに</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>(), <span class="co"># サンプルサイズ</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_bill_length_mm =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> T), <span class="co"># くちばしの長さの平均を取る、欠損値は除外</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length_mm =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   species       N mean_bill_length_mm mean_flipper_length_mm mean_body_mass_g
##   &lt;fct&gt;     &lt;int&gt;               &lt;dbl&gt;                  &lt;dbl&gt;            &lt;dbl&gt;
## 1 Adelie      152                38.8                   190.            3701.
## 2 Chinstrap    68                48.8                   196.            3733.
## 3 Gentoo      124                47.5                   217.            5076.</code></pre>
<ul>
<li>ペンギンの種類間での平均の比較が可能に</li>
</ul>
</section>
<section id="group_byを組み合わせる-1" class="slide level2">
<h2>group_byを組み合わせる</h2>
<ul>
<li>複数変数を指定してもOK</li>
</ul>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species) <span class="sc">%&gt;%</span> <span class="co"># 種類と性別ごとに</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>(),</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_bill_length_mm =</span> <span class="fu">mean</span>(bill_length_mm, <span class="at">na.rm =</span> T), <span class="co"># くちばしの長さの平均を取る、欠損値は除外</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length_mm =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> T),</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_body_mass_g =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T),</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;sex&#39;. You can override using the `.groups`
## argument.</code></pre>
<pre><code>## # A tibble: 8 x 6
## # Groups:   sex [3]
##   sex    species       N mean_bill_length_mm mean_flipper_leng~ mean_body_mass_g
##   &lt;fct&gt;  &lt;fct&gt;     &lt;int&gt;               &lt;dbl&gt;              &lt;dbl&gt;            &lt;dbl&gt;
## 1 female Adelie       73                37.3               188.            3369.
## 2 female Chinstrap    34                46.6               192.            3527.
## 3 female Gentoo       58                45.6               213.            4680.
## 4 male   Adelie       73                40.4               192.            4043.
## 5 male   Chinstrap    34                51.1               200.            3939.
## 6 male   Gentoo       61                49.5               222.            5485.
## 7 &lt;NA&gt;   Adelie        6                37.8               186.            3540 
## 8 &lt;NA&gt;   Gentoo        5                45.6               216.            4588.</code></pre>
<ul>
<li>同様に、標準偏差などを掲載すると良い</li>
</ul>
</section>
<section id="skimrパッケージの利用" class="slide level2">
<h2>skimrパッケージの利用</h2>
<ul>
<li>skim関数は各行にデータセットのカラム(列)、各列に統計量を記載した扱いやすい記述統計量を作成してくれる</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>descriptive <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>()</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(descriptive)</span></code></pre></div>
<pre><code>## -- Data Summary ------------------------
##                            Values    
## Name                       Piped data
## Number of rows             344       
## Number of columns          8         
## _______________________              
## Column type frequency:               
##   factor                   3         
##   numeric                  5         
## ________________________             
## Group variables            None      
## 
## -- Variable type: factor -------------------------------------------------------
## # A tibble: 3 x 6
##   skim_variable n_missing complete_rate ordered n_unique
## * &lt;chr&gt;             &lt;int&gt;         &lt;dbl&gt; &lt;lgl&gt;      &lt;int&gt;
## 1 species               0         1     FALSE          3
## 2 island                0         1     FALSE          3
## 3 sex                  11         0.968 FALSE          2
##   top_counts                 
## * &lt;chr&gt;                      
## 1 Ade: 152, Gen: 124, Chi: 68
## 2 Bis: 168, Dre: 124, Tor: 52
## 3 mal: 168, fem: 165         
## 
## -- Variable type: numeric ------------------------------------------------------
## # A tibble: 5 x 11
##   skim_variable     n_missing complete_rate   mean      sd     p0    p25    p50
## * &lt;chr&gt;                 &lt;int&gt;         &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 bill_length_mm            2         0.994   43.9   5.46    32.1   39.2   44.4
## 2 bill_depth_mm             2         0.994   17.2   1.97    13.1   15.6   17.3
## 3 flipper_length_mm         2         0.994  201.   14.1    172    190    197  
## 4 body_mass_g               2         0.994 4202.  802.    2700   3550   4050  
## 5 year                      0         1     2008.    0.818 2007   2007   2008  
##      p75   p100 hist 
## *  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
## 1   48.5   59.6 &lt;U+2583&gt;&lt;U+2587&gt;&lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2581&gt;
## 2   18.7   21.5 &lt;U+2585&gt;&lt;U+2585&gt;&lt;U+2587&gt;&lt;U+2587&gt;&lt;U+2582&gt;
## 3  213    231   &lt;U+2582&gt;&lt;U+2587&gt;&lt;U+2583&gt;&lt;U+2585&gt;&lt;U+2582&gt;
## 4 4750   6300   &lt;U+2583&gt;&lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2583&gt;&lt;U+2582&gt;
## 5 2009   2009   &lt;U+2587&gt;&lt;U+2581&gt;&lt;U+2587&gt;&lt;U+2581&gt;&lt;U+2587&gt;</code></pre>
</section>
<section id="質的変数と量的変数" class="slide level2">
<h2>質的変数と量的変数</h2>
<ul>
<li><code>yank</code>関数：skimで要約した列のうち、特定の型を持つ値の要約のみを抜き出して記載する関数</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yank</span>(., <span class="at">skim_type =</span> <span class="st">&quot;numeric&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># numeric型の要約統計量を表示</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## 
## -- Variable type: numeric ------------------------------------------------------
## # A tibble: 5 x 11
##   skim_variable     n_missing complete_rate   mean      sd     p0    p25    p50
## * &lt;chr&gt;                 &lt;int&gt;         &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 bill_length_mm            2         0.994   43.9   5.46    32.1   39.2   44.4
## 2 bill_depth_mm             2         0.994   17.2   1.97    13.1   15.6   17.3
## 3 flipper_length_mm         2         0.994  201.   14.1    172    190    197  
## 4 body_mass_g               2         0.994 4202.  802.    2700   3550   4050  
## 5 year                      0         1     2008.    0.818 2007   2007   2008  
##      p75   p100 hist 
## *  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
## 1   48.5   59.6 &lt;U+2583&gt;&lt;U+2587&gt;&lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2581&gt;
## 2   18.7   21.5 &lt;U+2585&gt;&lt;U+2585&gt;&lt;U+2587&gt;&lt;U+2587&gt;&lt;U+2582&gt;
## 3  213    231   &lt;U+2582&gt;&lt;U+2587&gt;&lt;U+2583&gt;&lt;U+2585&gt;&lt;U+2582&gt;
## 4 4750   6300   &lt;U+2583&gt;&lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2583&gt;&lt;U+2582&gt;
## 5 2009   2009   &lt;U+2587&gt;&lt;U+2581&gt;&lt;U+2587&gt;&lt;U+2581&gt;&lt;U+2587&gt;</code></pre>
</section>
<section id="グループごとの統計量" class="slide level2">
<h2>グループごとの統計量</h2>
<ul>
<li>skimにもgroup_by関数を適用可能</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>sum <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(island) <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">skim</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yank</span>(., <span class="at">skim_type =</span> <span class="st">&quot;numeric&quot;</span>)</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>sum <span class="sc">%&gt;%</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(skim_variable <span class="sc">==</span> <span class="st">&quot;bill_length_mm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Biscoe&#39;</span>, <span class="st">&#39;Dream&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(skim_variable, island, complete_rate, mean, sd) <span class="co"># selectで必要な統計量だけ出す</span></span></code></pre></div>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: left;">island</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: left;">Biscoe</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">45.26</td>
<td style="text-align: right;">4.77</td>
</tr>
<tr class="even">
<td style="text-align: left;">bill_length_mm</td>
<td style="text-align: left;">Dream</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">44.17</td>
<td style="text-align: right;">5.95</td>
</tr>
</tbody>
</table>
</section></section>
<section>
<section id="データの概観可視化" class="title-slide slide level1">
<h1>データの概観：可視化</h1>
<ul>
<li>データを可視化する：ggplot2パッケージの利用</li>
<li>ggplotの記法を覚える
<ul>
<li>ヒストグラム</li>
<li>散布図</li>
<li>棒グラフ</li>
</ul></li>
</ul>
</section>
<section id="データを可視化する" class="slide level2">
<h2>データを可視化する</h2>
<ul>
<li>前章では要約統計量を作成することでデータの概観を把握する方法を学習</li>
<li>しかし、変数の分布や二変数間の相関、時系列での数値の変化など、要約統計量だけでは捉えきれない性質も存在</li>
<li>データをグラフの形で可視化することで、分かりやすい・伝わりやすい数値化が可能</li>
<li>デフォルトで使用できるgraphicsパッケージは早くて便利だが、ggplot2パッケージならより詳細&amp;手軽な操作で美しいグラフを描画できる</li>
</ul>
<p><img src="figs/Ohtani_spray_total.png" width="50%" style="display: block; margin: auto;" /></p>
</section>
<section id="ggplotの記法" class="slide level2">
<h2>ggplotの記法</h2>
<ul>
<li>ggplot2パッケージの関数はやや特殊：たくさんの関数を「足し算」することでグラフに手を加えていく</li>
<li><code>ggplot</code> 関数で台紙を作る：どのデータフレームを使って可視化するのかもここで宣言</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> palmerpenguins<span class="sc">::</span>penguins</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> df) <span class="co"># この時点では白紙</span></span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-56-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="ggplotの記法-contd" class="slide level2">
<h2>ggplotの記法 (cont’d)</h2>
<p><img src="figs/ggplot_fig.png" width="80%" style="display: block; margin: auto;" /></p>
</section>
<section id="図形の描画軸の設定" class="slide level2">
<h2>図形の描画：軸の設定</h2>
<ul>
<li>例として、ペンギンの体重のヒストグラムを作ろう：体重という1変数の分布を見る</li>
<li><code>aes</code>関数を使い、グラフの横軸・縦軸や色分けの情報を加えていく
<ul>
<li>横軸: x, 縦軸: y, グループ分け: group, 色分け: colour, 塗りつぶし: shape, 形: shape あたりを覚えておく</li>
<li>今回はヒストグラムなので、「横軸が体重ですよ」という情報を渡してやればよい</li>
</ul></li>
<li>その上で、ヒストグラムを描画する関数<code>geom_histogram</code>関数を加える</li>
</ul>
</section>
<section id="ヒストグラムの描画" class="slide level2">
<h2>ヒストグラムの描画</h2>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g) <span class="sc">+</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 2 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-58-1.png" width="50%" style="display: block; margin: auto;" /></p>
</section>
<section id="細かな体裁の変更" class="slide level2">
<h2>細かな体裁の変更</h2>
<ul>
<li>グラフの背景や軸ラベルを設定する
<ul>
<li>背景：<code>theme_〇〇</code> 関数で様々な書式を設定できるので、お好みで好きなものを利用。なるべくシンプルなものがよい</li>
<li>軸ラベルなど：<code>labs</code>関数で文字を指定、各オプションが対応する場所のテキストが変更される</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> ..density..) <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="co"># 背景の設定</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;密度&quot;</span>, <span class="at">title =</span> <span class="st">&quot;ぺんぎんの体重分布&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-59-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="グループを分けて描画する" class="slide level2">
<h2>グループを分けて描画する</h2>
<ul>
<li><code>aes</code>にgroup引数を指定すると、それぞれの描画をグループごとにやってくれる</li>
<li>同様にcolour・fillを指定すると、グループごとに色分けしてくれる
<ul>
<li>通常colour は縁取り、fillは塗りつぶし部分を担当</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(<span class="at">data =</span> df) <span class="sc">+</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> ..density.., <span class="at">group =</span> sex, <span class="at">fill =</span> sex) <span class="sc">+</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 横軸に..density..を指定すると、計数の代わりに密度を出してくれる</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span> <span class="co"># alpha は透明にするためのオプション</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="co"># 背景の設定</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;密度&quot;</span>, <span class="at">title =</span> <span class="st">&quot;ぺんぎんの体重分布&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;性別&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-60-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="散布図二変数間の関係を可視化する" class="slide level2">
<h2>散布図：二変数間の関係を可視化する</h2>
<ul>
<li>散布図は二変数間の関係を示すのに便利：<code>geom_point</code>関数を利用</li>
<li>横軸と縦軸両方に変数が必要</li>
<li></li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_length_mm, <span class="at">colour =</span> species) <span class="sc">+</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="co"># 最小二乗法で近似曲線を描画</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;くちばしの長さ (mm)&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-61-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="散布図-contd" class="slide level2">
<h2>散布図 (cont’d)</h2>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_length_mm, <span class="at">colour =</span> species, <span class="at">group =</span> species) <span class="sc">+</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="co"># 最小二乗法で近似曲線を描画</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;くちばしの長さ (mm)&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-62-1.png" width="40%" style="display: block; margin: auto;" /></p>
<ul>
<li>group化すると種類ごとに近似曲線を引いてくれる</li>
</ul>
</section>
<section id="棒グラフグループ間の変数の比較" class="slide level2">
<h2>棒グラフ：グループ間の変数の比較</h2>
<ul>
<li>棒グラフを描画する関数は<code>geom_bar</code>関数だが、データフレームから各値の平均を計算してグラフを作成するのはちょっと面倒くさい</li>
<li>データの平均値を比較したい場合：<code>stat_summary</code>で、「平均値を」「棒グラフの形で」描画することをオーダーできる</li>
</ul>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>df_clean <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex)) <span class="co"># 性別不明を取り除く</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df_clean) <span class="sc">+</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> sex, <span class="at">y =</span> body_mass_g, <span class="at">fill =</span> sex) <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;bar&quot;</span>, <span class="at">fun =</span> <span class="st">&quot;mean&quot;</span>) <span class="sc">+</span> <span class="co"># 棒グラフを、平均を示す形で</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, <span class="at">fun.data =</span> <span class="st">&quot;mean_se&quot;</span>) <span class="sc">+</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;体重 (mm)&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-63-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="折れ線グラフ" class="slide level2">
<h2>折れ線グラフ：</h2>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> body_mass_g, <span class="at">colour =</span> species, <span class="at">group =</span> species) <span class="sc">+</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;point&quot;</span>, <span class="at">fun =</span> <span class="st">&quot;mean&quot;</span>) <span class="sc">+</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, <span class="at">fun =</span> <span class="st">&quot;mean&quot;</span>) <span class="sc">+</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">&quot;pointrange&quot;</span>, <span class="at">fun.data =</span> <span class="st">&quot;mean_se&quot;</span>) <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;体重 (mm)&quot;</span>)</span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-64-1.png" width="40%" style="display: block; margin: auto;" /></p>
</section>
<section id="グラフそのものを系統ごとに分ける" class="slide level2">
<h2>グラフそのものを系統ごとに分ける</h2>
<ul>
<li>重ねると見づらいから複数に分けたい</li>
<li><code>facet_wrap</code>関数を使うと、サンプルを分割して別々に表示してくれる
<ul>
<li>「~ 変数名」で分割の基準となるサンプル、nrow = , ncol = で出力の並べ方を指定</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_length_mm, <span class="at">fill =</span> species) <span class="sc">+</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;circle filled&quot;</span>) <span class="sc">+</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span> <span class="co"># 色分けに関する設定を行う関数：塗る色の指定</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;くちばしの長さ (mm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="sc">~</span> island, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="co"># 島ごとに分けてみる</span></span></code></pre></div>
<p><img src="introduction1_files/figure-revealjs/unnamed-chunk-65-1.png" width="45%" style="display: block; margin: auto;" /></p>
</section>
<section id="グラフを保存する" class="slide level2">
<h2>グラフを保存する</h2>
<ul>
<li>出来上がったグラフを保存する</li>
<li>R Studioなら、右下のPlotsに表示されたグラフをクリック操作で保存することもできる</li>
<li>プロットをggsave関数に通して保存できる</li>
</ul>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>pl <span class="ot">&lt;-</span> ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df) <span class="sc">+</span> <span class="co"># さっきのやつをオブジェクトに保存</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, <span class="at">y =</span> bill_length_mm, <span class="at">colour =</span> species) <span class="sc">+</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="st">&quot;circle filled&quot;</span>) <span class="sc">+</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;体重 (g)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;くちばしの長さ (mm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="sc">~</span> island, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> pl, <span class="at">filename =</span> <span class="st">&quot;figs/plot_sample.png&quot;</span>)</span></code></pre></div>
</section>
<section id="その他の可視化" class="slide level2">
<h2>その他の可視化</h2>
<ul>
<li>様々な可視化ができます</li>
<li>ggplot somethingで作りたいものを調べれば出てくるので参考にして下さい</li>
<li>個人的に就職に一番役立ちそうなのはここだと思う</li>
<li>暇も潰せる</li>
</ul>
<p><img src="figs/Ohtani_pitch_usage_byMonth.png" width="65%" style="display: block; margin: auto;" /></p>
</section></section>
<section>
<section id="分析と結果の表示" class="title-slide slide level1">
<h1>分析と結果の表示</h1>
<ul>
<li>分析目的の設定</li>
<li>分析の一例：CollegeDistanceデータを用いた分析
<ul>
<li>操作変数法</li>
</ul></li>
<li>2群間の比較：<span class="math inline">\(t\)</span>検定</li>
<li>最小二乗法</li>
<li>最尤法
<ul>
<li>ロジスティック回帰</li>
</ul></li>
</ul>
</section>
<section id="計量分析を行う" class="slide level2">
<h2>計量分析を行う</h2>
<ul>
<li>データの要約・可視化が終わったら、因果関係を識別するための分析に取り組む</li>
<li>最も一般的なのは回帰分析</li>
</ul>
<p><span class="math display">\[y_{i} = \alpha + \beta X_i + u_i\]</span></p>
<ul>
<li>説明変数の係数を推定し、説明変数の限界的な変化が被説明変数に対してどれだけ影響するかを推定したい</li>
<li>ここでは、Rで利用できるパッケージを使って分析の一例を示す</li>
</ul>
</section>
<section id="aerパッケージの導入" class="slide level2">
<h2>AERパッケージの導入</h2>
<ul>
<li>ペンギンのデータは簡潔で便利だが、経済学の分析に使うのはちょっと厳しそう</li>
<li>経済学向けのサンプルデータがあればいい</li>
<li>あります：AERパッケージ
<ul>
<li><a href="https://cran.r-project.org/web/packages/AER/AER.pdf">CRAN</a></li>
<li>パッケージをライブラリで起動後、利用したいデータセットを<code>data()</code>関数で起動、データフレームが自動で取り込まれる</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;AER&quot;</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AER)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;DataSetName&quot;</span>) <span class="co">#好きなデータセットの名前、一覧はpdfを参照</span></span></code></pre></div>
</section>
<section id="aerパッケージの利用" class="slide level2">
<h2>AERパッケージの利用</h2>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;CollegeDistance&quot;</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(CollegeDistance))</span></code></pre></div>
<pre><code>##   gender ethnicity score fcollege mcollege home urban unemp wage distance
## 1   male     other 39.15      yes       no  yes   yes   6.2 8.09      0.2
## 2 female     other 48.87       no       no  yes   yes   6.2 8.09      0.2
## 3   male     other 48.74       no       no  yes   yes   6.2 8.09      0.2
## 4   male      afam 40.40       no       no  yes   yes   6.2 8.09      0.2
## 5 female     other 40.48       no       no   no   yes   5.6 8.09      0.4
## 6   male     other 54.71       no       no  yes   yes   5.6 8.09      0.4
##   tuition education income region
## 1 0.88915        12   high  other
## 2 0.88915        12    low  other
## 3 0.88915        12    low  other
## 4 0.88915        12    low  other
## 5 0.88915        13    low  other
## 6 0.88915        12    low  other</code></pre>
</section>
<section id="課題佐々木ゼミ向け" class="slide level2">
<h2>課題(佐々木ゼミ向け)</h2>
<ul>
<li>AERパッケージから好きなデータセットを使い
<ul>
<li>分析課題の設定：各データセットに元論文があるので、その研究テーマを使ってもOK</li>
<li>データセットの要約：要約統計量、必要ならグループごとに分けたものを作成し、まとめておく</li>
<li>なんでもいいので新しい変数を作ってみる</li>
<li>データの可視化：分析課題を検証するにあたって必要そうな可視化を行う</li>
<li>CollegeDistanceは解説で使うのでそれ以外で</li>
</ul></li>
<li>これを踏まえて、来週回帰分析などの分析手法を紹介します</li>
</ul>
</section></section>
<section>
<section id="rmarkdownを用いたレポートの作成" class="title-slide slide level1">
<h1>RMarkdownを用いたレポートの作成</h1>
<ul>
<li>Markdown形式のドキュメント
<ul>
<li>数式フォントの利用</li>
</ul></li>
<li>コードブロックの作成</li>
<li>htmlドキュメントの作成</li>
<li>Wordファイルへの変換</li>
<li>Powerpointファイルへの変換</li>
<li>R Markdownを併用して論文作成・スライド作成の手間を省く</li>
</ul>
</section>
<section id="markdownとは" class="slide level2">
<h2>Markdownとは</h2>
<ul>
<li>主にhtml(ウェブサイトなどで利用される形式)を手軽に出力するために考案された言語</li>
<li>Rの結果出力などに特化した形式：R Markdown
<ul>
<li>ここではR Markdownについて扱う</li>
<li>htmlだけでなく、WordやPowerPointなど、使い慣れた形式にも変換可能</li>
</ul></li>
<li>分析結果をいちいちスクリーンショットしたり、体裁を整えるために出力をやり直したりする必要がなくなる
<ul>
<li>全てをR Markdownで完結させる必要はないので、例えば図や分析結果の出力をするためのWordファイルを作り、できたものをコピペするなどして使えば微調整も容易</li>
</ul></li>
</ul>
</section></section>
<section id="おまけバージョン管理" class="title-slide slide level1">
<h1>おまけ：バージョン管理</h1>
<ul>
<li>論文執筆・輪読の資料報告は班単位で行うので、スライドや分析結果を複数人で作成・共有する必要がある</li>
<li>Dropbox, Github, Google Drive などでファイルごと共有しておくと、スライドをくっつけたり各自が修正したものをすり合わせる作業が削減できる、たぶん</li>
<li>覚えておいて損はないのでまあ興味があれば</li>
</ul>
</section>
    </div>
  </div>

  <script src="introduction1_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="introduction1_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Transition style
        transition: 'default', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

        menu: {
   
          numbers: true,
    
    
    
    
    
    
 
          custom: false,
          themes: false,
          transitions: false
        },



        // Optional reveal.js plugins
        dependencies: [
          { src: 'introduction1_files/reveal.js-3.3.0.1/plugin/menu/menu.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
